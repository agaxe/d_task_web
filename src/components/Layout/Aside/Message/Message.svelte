<script>
  import { Input, MessageBox, Title, Profile } from '@/components';
  import { dateToFormatString } from '@/utils';

  let exampleDate = dateToFormatString(new Date(), 'yyyyÎÖÑ MMÏõî ddÏùº');
</script>

<div class="chat">
  <Title class="title">CHAT</Title>
  <div class="chat-wrap">
    <div class="chat-box">
      <div class="chat-inner">
        <div class="chat-date">
          <p class="chat-date__text">{exampleDate}</p>
        </div>
        <ul class="chat-list">
          {#each [...Array(4)] as cat}
            <!-- ÎèôÏ†Å Ìï≠Î™© -->
            <li class="chat-item">
              <div class="chat-profile">
                <Profile class="chat-profile__icon" isOnline size="md" />
                <p class="chat-profile__name">ÌôçÍ∏∏Îèô</p>
              </div>
              <div class="msg">
                <ul class="msg-list">
                  <li class="msg-item">
                    <MessageBox class="msg-text" text="ÏïàÎÖïÌïòÏÑ∏Ïöî! üòÄ" />
                    <p class="time">Ïò§ÌõÑ 8:54</p>
                  </li>
                  <li class="msg-item">
                    <MessageBox
                      class="msg-text"
                      text="Ï≤úÌïòÎ•º ÏÑ§Î†àÎäî Ïö©Í∏∞Í∞Ä Ìô©Í∏àÏãúÎåÄÏùò Í∑∏Îì§ÏùÄ Í∑∏Îì§Ïùò Í∞ôÏúºÎ©∞, ÎøêÏù¥Îã§. Ïñ¥Îîî ÏïÑÎãàÎçîÎ©¥, ÎÇ¥Îäî Í≤ÉÏù¥Îã§."
                    />
                    <p class="time">Ïò§ÌõÑ 8:54</p>
                  </li>
                </ul>
              </div>
            </li>
            <!-- /./ ÎèôÏ†Å Ìï≠Î™© -->

            <!-- ÎèôÏ†Å Ìï≠Î™© -->
            <li class="chat-item">
              <div class="msg">
                <ul class="msg-list" class:isMyMsg={true}>
                  <li class="msg-item">
                    <MessageBox
                      class="msg-text"
                      text="ÏïàÎÖïÌïòÏÑ∏Ïöî! üòÄ"
                      isMyMsg
                    />
                    <p class="time">Ïò§ÌõÑ 8:54</p>
                  </li>
                  <li class="msg-item">
                    <MessageBox
                      class="msg-text"
                      text="Ï≤úÌïòÎ•º ÏÑ§Î†àÎäî Ïö©Í∏∞Í∞Ä Ìô©Í∏àÏãúÎåÄÏùò Í∑∏Îì§ÏùÄ Í∑∏Îì§Ïùò Í∞ôÏúºÎ©∞, ÎøêÏù¥Îã§. Ïñ¥Îîî ÏïÑÎãàÎçîÎ©¥, ÎÇ¥Îäî Í≤ÉÏù¥Îã§."
                      isMyMsg
                    />
                    <p class="time">Ïò§ÌõÑ 8:54</p>
                  </li>
                </ul>
              </div>
            </li>
            <!-- /./ ÎèôÏ†Å Ìï≠Î™© -->
          {/each}
        </ul>
      </div>
    </div>
    <div class="chat-input-box">
      <Input iconName="send" iconAlign="RIGHT" class="msg-input" />
    </div>
  </div>
</div>

<style lang="scss">
  .chat {
    display: grid;
    height: inherit;
    grid-template-rows: auto 1fr;
    gap: 24px;
    & :global(.title) {
      font-size: 16px;
      user-select: none;
    }
    &-wrap {
      display: grid;
      grid-auto-rows: 1fr auto;
      row-gap: 24px;
    }
    &-box {
      position: relative;
      height: 100%;
    }
    &-inner {
      border: 1px solid var(--color-gray-10);
      position: absolute;
      left: 0;
      top: 0;
      height: 100%;
      border-radius: 8px;
      overflow-y: auto;
    }
    &-date {
      position: relative;
      margin-top: 16px;
      &__text {
        position: relative;
        background: #fff;
        z-index: 5;
        width: max-content;
        text-align: center;
        margin: 0 auto;
        padding: 0 24px;
        color: #8a898e;
        font-size: 12px;
        font-weight: 400;
      }
      &:after {
        position: absolute;
        z-index: 1;
        left: 0;
        top: 50%;
        transform: translate(0, -50%);
        content: ' ';
        display: block;
        width: 100%;
        height: 1px;
        background-color: var(--color-gray-10);
      }
    }
    &-list {
      display: flex;
      flex-direction: column;
      padding: 20px 16px;
      gap: 24px;
    }
    &-item {
      display: flex;
      align-items: flex-start;
    }
    &-profile {
      display: flex;
      flex-direction: column;
      gap: 8px;
      font-size: 12px;
      justify-content: center;
      width: max-content;
      text-align: center;
      user-select: none;
      margin-right: 8px;
      &__name {
        color: #8a898e;
      }
    }
    & :global(.msg-input) {
      width: 100%;
    }
  }

  // Î©îÏãúÏßÄ ÏòÅÏó≠
  .msg {
    flex-wrap: wrap;
    flex: 1 1 auto;
    &-list {
      display: flex;
      flex-direction: column;
      gap: 6px;
      height: 100%;
    }
    &-item {
      width: 100%;
      display: flex;
      align-items: flex-end;
      gap: 8px;
      .time {
        display: none;
        flex: 0 0 auto;
        width: 50px;
        color: #8a898e;
        font-size: 12px;
        font-weight: 400;
      }
      &:last-child {
        .time {
          display: block;
        }
      }
    }
    & :global(.msg-text) {
      flex: 1 1 auto;
      max-width: fit-content;
    }
    &-list.isMyMsg {
      .msg-item {
        flex-direction: row-reverse;
      }
    }
  }
</style>
